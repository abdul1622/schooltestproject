{% extends 'base.html'%}
{% block content %}
        <h1>Login</h1>
        <div class="container">
            <div class="frame">
                <div id="login">
                  <input type="email" id="id_email"/>
                  <input type="phone" id="id_phone"/>
                    <button onClick="login()" >Login</button><br>

                </div>
                    </div>
                  <div class="cover-photo"></div>
                  <div class="profile-photo"></div>
                  <h1 class="welcome">Welcome, Friend</h1>
                </div>
                <p id="demo" style="color: black;"></p>

            </div>
          </div>
       

    </div>

<script>

    function login() {
    var email=document.getElementById('id_email').value
    var phone=document.getElementById('id_phone').value
    let token = document.getElementsByName("csrfmiddlewaretoken").value
    fetch('/log', {
        method:'POST',
        body: JSON.stringify({'email':email,'phone':phone, 'token': token}),
        headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
          },
    })
    .then(response => response.json())
    .then(data => {
        console.log("data=",data.data.email)
        localStorage.setItem("email", data.data.email);
    })
    document.getElementById("demo").innerHTML = 3;
}
</script>
{% endblock %}